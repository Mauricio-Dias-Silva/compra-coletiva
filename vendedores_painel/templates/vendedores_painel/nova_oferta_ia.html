{% extends 'base.html' %}
{% load static %}

{% block titulo_pagina %}{{ titulo_pagina }}{% endblock %}

{% block conteudo %}
<div class="row justify-content-center">
    <div class="col-md-6">
        <div class="card shadow">
            <div class="card-header bg-primary text-white">
                <h4 class="mb-0"><i class="bi bi-camera"></i> Oferta Flash (IA)</h4>
            </div>
            <div class="card-body">
                <p class="text-muted">
                    Tire uma foto do produto na prateleira. A IA vai ler o pre√ßo, calcular sua margem e criar a oferta
                    de Lote automaticamente.
                </p>

                <form method="post" enctype="multipart/form-data">
                    {% csrf_token %}

                    <div class="mb-3 text-center">
                        <label for="id_foto" class="form-label btn btn-outline-primary btn-lg w-100 p-4">
                            <i class="bi bi-camera-fill display-4"></i><br>
                            Tirar Foto / Carregar
                        </label>
                        {{ form.foto }}
                        <!-- Ensure the input is hidden or styled but keeping functionality -->
                    </div>

                    <div class="mb-3">
                        <label class="form-label">Margem de Lucro (%)</label>
                        {{ form.margem }}
                        <div class="form-text">Quanto voc√™ quer ganhar sobre o pre√ßo da prateleira?</div>
                    </div>

                    <div class="row">
                        <div class="col-6 mb-3">
                            <label class="form-label">Entrega</label>
                            {{ form.tipo_entrega }}
                        </div>
                        <div class="col-6 mb-3">
                            <label class="form-label">Frete (R$)</label>
                            {{ form.valor_frete }}
                        </div>
                    </div>

                    <div class="d-grid gap-2">
                        <button type="submit" class="btn btn-success btn-lg">
                            üöÄ Criar Oferta Agora
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<style>
    /* Esconder o input file padr√£o e deixar s√≥ o bot√£o bonito */
    input[type="file"] {
        display: none;
        /* Wait, if I hide it, how does user click? 
           The label 'for' attribute links to the id. 
           Need to ensure Django renders ID correctly. usually id_foto.
        */
    }

    /* Correction: display block but opacity 0 over the button? Or just reliance on ID. */
</style>

<script>
    // Simple script to show selected filename
    document.getElementById('id_foto').style.display = 'block'; // Fallback logic: Show it standard for safety first.
</script>

{% endblock %}